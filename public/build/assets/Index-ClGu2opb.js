import{r as g,c as L,a as f,w as m,b as e,d as n,e as d,o as a,t as o,k as b,A as N,F as h,h as A,l as T,n as F,f as q,u as _,i as w,g as k,v as G,N as j}from"./app-qAvELMBE.js";import{_ as H}from"./AdminLayout-DffF_jUa.js";const I={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6"},K={class:"flex justify-between items-center mb-6"},Q={class:"flex space-x-4"},W=["disabled"],X={key:0},Y={key:1},Z={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},ee=["value"],te={class:"overflow-x-auto"},se={class:"min-w-full divide-y divide-gray-200"},ae={class:"bg-gray-50"},le={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},oe=["checked"],re={class:"bg-white divide-y divide-gray-200"},ne={class:"px-6 py-4 whitespace-nowrap"},ie=["value","disabled"],de={class:"px-6 py-4 whitespace-nowrap"},ue={class:"flex items-center"},ce={class:"text-sm font-medium text-gray-900"},ge={class:"text-sm text-gray-500"},pe={key:0,class:"text-xs text-gray-400"},ve={class:"px-6 py-4 whitespace-nowrap"},xe={class:"text-sm text-gray-900"},me={class:"text-sm text-gray-500"},ye={class:"px-6 py-4 whitespace-nowrap"},fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},be={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},he=["onClick"],_e=["onClick"],we={key:0,class:"mt-6"},ke={class:"flex items-center justify-between"},je={class:"flex-1 flex justify-between sm:hidden"},Ce={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Re={class:"text-sm text-gray-700"},Se={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Ae={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500"},Ve={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Ee={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Ne={class:"text-sm text-gray-600 mb-4"},Fe={class:"mb-4"},Ue={__name:"Index",props:{registrations:Object,events:Array,filters:Object},setup(i){const p=i,r=g([]),v=g(!1),C=g(!1),u=g(null),x=g(""),c=g({status:p.filters.status||"all",event_id:p.filters.event_id||""}),V=L(()=>{if(!p.registrations.data.length)return!1;const l=p.registrations.data.filter(t=>t.status==="pending");return l.length>0&&l.every(t=>r.value.includes(t.id))}),M=()=>{const l=p.registrations.data.filter(t=>t.status==="pending");V.value?r.value=r.value.filter(t=>!l.some(y=>y.id===t)):l.forEach(t=>{r.value.includes(t.id)||r.value.push(t.id)})},R=()=>{j.get(route("admin.registrations.index"),c.value,{preserveState:!0,replace:!0})},P=()=>{c.value={status:"all",event_id:""},R()},U=l=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",D=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=l=>{j.post(route("admin.registrations.approve",l),{},{onSuccess:()=>{r.value=r.value.filter(t=>t!==l)}})},z=()=>{r.value.length!==0&&(v.value=!0,j.post(route("admin.registrations.bulk-approve"),{registration_ids:r.value},{onSuccess:()=>{r.value=[],v.value=!1},onError:()=>{v.value=!1}}))},O=l=>{u.value=l,x.value="",C.value=!0},E=()=>{C.value=!1,u.value=null,x.value=""},$=()=>{u.value&&j.post(route("admin.registrations.reject",u.value.id),{reason:x.value},{onSuccess:()=>{E(),r.value=r.value.filter(l=>l!==u.value.id)}})};return(l,t)=>(a(),f(H,null,{default:m(()=>{var y;return[e("div",I,[e("div",J,[e("div",K,[t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-gray-900"},"Registration Approvals",-1)),e("div",Q,[r.value.length>0?(a(),n("button",{key:0,onClick:z,disabled:v.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50"},[v.value?(a(),n("span",X,"Processing...")):(a(),n("span",Y,"Approve Selected ("+o(r.value.length)+")",1))],8,W)):d("",!0)])]),e("div",Z,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.value.status=s),onChange:R,class:"mt-1 block w-full rounded-md border-gray-300"},[...t[5]||(t[5]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)])],544),[[N,c.value.status]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"Event",-1)),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.value.event_id=s),onChange:R,class:"mt-1 block w-full rounded-md border-gray-300"},[t[7]||(t[7]=e("option",{value:""},"All Events",-1)),(a(!0),n(h,null,A(i.events,s=>(a(),n("option",{key:s.id,value:s.id},o(s.title),9,ee))),128))],544),[[N,c.value.event_id]])]),e("div",{class:"flex items-end"},[e("button",{onClick:P,class:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"}," Clear Filters ")])]),e("div",te,[e("table",se,[e("thead",ae,[e("tr",null,[e("th",le,[e("input",{type:"checkbox",onChange:M,checked:V.value,class:"rounded border-gray-300"},null,40,oe)]),t[9]||(t[9]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Participant ",-1)),t[10]||(t[10]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Event ",-1)),t[11]||(t[11]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[12]||(t[12]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Registered At ",-1)),t[13]||(t[13]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",re,[(a(!0),n(h,null,A(i.registrations.data,s=>(a(),n("tr",{key:s.id},[e("td",ne,[b(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[2]||(t[2]=S=>r.value=S),disabled:s.status!=="pending",class:"rounded border-gray-300"},null,8,ie),[[T,r.value]])]),e("td",de,[e("div",ue,[e("div",null,[e("div",ce,o(s.registrant_name),1),e("div",ge,o(s.registrant_email),1),s.registrant_student_id?(a(),n("div",pe,o(s.registrant_student_id)+" - "+o(s.registrant_course)+" "+o(s.registrant_year_level)+" "+o(s.registrant_section),1)):d("",!0)])])]),e("td",ve,[e("div",xe,o(s.event.title),1),e("div",me,o(s.event.event_date),1)]),e("td",ye,[e("span",{class:F([U(s.status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},o(s.status.charAt(0).toUpperCase()+s.status.slice(1)),3)]),e("td",fe,o(D(s.created_at)),1),e("td",be,[q(_(w),{href:l.route("admin.registrations.show",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:m(()=>[...t[14]||(t[14]=[k(" View ",-1)])]),_:1},8,["href"]),s.status==="pending"?(a(),n("button",{key:0,onClick:S=>B(s.id),class:"text-green-600 hover:text-green-900"}," Approve ",8,he)):d("",!0),s.status==="pending"?(a(),n("button",{key:1,onClick:S=>O(s),class:"text-red-600 hover:text-red-900"}," Reject ",8,_e)):d("",!0)])]))),128))])])]),i.registrations.links?(a(),n("div",we,[e("nav",ke,[e("div",je,[i.registrations.prev_page_url?(a(),f(_(w),{key:0,href:i.registrations.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:m(()=>[...t[15]||(t[15]=[k(" Previous ",-1)])]),_:1},8,["href"])):d("",!0),i.registrations.next_page_url?(a(),f(_(w),{key:1,href:i.registrations.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:m(()=>[...t[16]||(t[16]=[k(" Next ",-1)])]),_:1},8,["href"])):d("",!0)]),e("div",Ce,[e("div",null,[e("p",Re," Showing "+o(i.registrations.from)+" to "+o(i.registrations.to)+" of "+o(i.registrations.total)+" results ",1)]),e("div",null,[e("nav",Se,[(a(!0),n(h,null,A(i.registrations.links,s=>(a(),n(h,{key:s.label},[s.url?(a(),f(_(w),{key:0,href:s.url,class:F(["relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium",s.active?"bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white text-gray-500 hover:bg-gray-50"])},{default:m(()=>[k(o(s.label),1)]),_:2},1032,["href","class"])):(a(),n("span",Ae,o(s.label),1))],64))),128))])])])])])):d("",!0)])]),C.value?(a(),n("div",Ve,[e("div",Ee,[t[18]||(t[18]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Reject Registration",-1)),e("p",Ne," Are you sure you want to reject the registration for "+o((y=u.value)==null?void 0:y.registrant_name)+"? ",1),e("div",Fe,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason (Optional)",-1)),b(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>x.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:"3",placeholder:"Enter reason for rejection..."},null,512),[[G,x.value]])]),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:E,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400"}," Cancel "),e("button",{onClick:$,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"}," Reject ")])])])):d("",!0)]}),_:1}))}};export{Ue as default};
