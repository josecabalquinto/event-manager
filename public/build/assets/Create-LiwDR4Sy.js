import{r as g,c as E,a as z,w as v,b as e,d as o,e as j,f as x,u as p,i as y,g as b,o as a,F as h,h as _,n as P,t as r,j as B,k as f,v as w,l as H,N as S}from"./app-qAvELMBE.js";import{_ as L}from"./AdminLayout-DffF_jUa.js";const $={class:"py-12"},O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-8"},q={class:"p-6 text-gray-900"},G={class:"flex justify-between items-center"},I={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-8"},J={class:"p-6"},K={key:0,class:"text-center py-12"},Q={key:1,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},R=["onClick"],W={class:"flex items-center justify-between mb-2"},X={class:"font-semibold text-gray-800"},Y={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},Z={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},ee={class:"text-sm text-gray-600 mb-2"},te={class:"flex justify-between text-sm"},se={class:"text-blue-600"},ie={class:"text-green-600"},le={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ae={class:"p-6"},ne={class:"text-lg font-semibold text-gray-800 mb-6"},oe={class:"grid md:grid-cols-2 gap-6 mb-6"},re=["placeholder"],de={class:"mb-6"},ce=["placeholder"],ue={class:"mb-6"},me={class:"flex justify-between items-center mb-4"},ve={key:0,class:"border rounded-lg p-6 bg-gray-50"},be={class:"max-w-2xl mx-auto bg-white border-4 border-gray-800 rounded-lg p-6 shadow-lg"},fe={class:"text-center mb-6"},ge={class:"text-2xl font-bold text-gray-800 mb-2"},xe={class:"text-center space-y-4"},pe=["innerHTML"],ye={class:"mt-8"},he={class:"text-gray-800 font-semibold"},_e={class:"text-gray-600 text-xs"},we={key:1,class:"flex justify-between items-end text-xs"},ke={class:"mb-6"},Ce={class:"flex justify-between items-center mb-4"},Ee={class:"block text-sm font-medium text-gray-700"},je={key:0,class:"text-center py-8 text-gray-500"},Pe={key:1,class:"border rounded-lg"},Se={class:"max-h-80 overflow-y-auto"},Te={class:"flex items-center"},Me=["id","value"],Ne=["for"],De={class:"font-medium text-gray-900"},Ve={class:"text-sm text-gray-500"},Ae={class:"text-right"},Ue={class:"text-sm font-medium text-green-600"},ze={class:"flex justify-end space-x-4"},Be=["disabled"],He={key:0},Le={key:1},Fe={__name:"Create",props:{events:{type:Array,default:()=>[]},selectedEvent:{type:Object,default:null}},setup(n){var C;const d=n,c=g(!1),u=g(!1),l=g({event_id:((C=d.selectedEvent)==null?void 0:C.id)||null,completion_date:new Date().toISOString().split("T")[0],certificate_title:"",certificate_template:"",participants:[]}),T=E(()=>{var i;return l.value.certificate_title||((i=d.selectedEvent)==null?void 0:i.certificate_title)||"Certificate of Completion"}),M=E(()=>{var t,s;let i=l.value.certificate_template||((t=d.selectedEvent)==null?void 0:t.certificate_template)||"has successfully completed {event_title} on {event_date}.";return i=i.replace("{participant_name}","[Participant Name]"),i=i.replace("{event_title}",((s=d.selectedEvent)==null?void 0:s.title)||"[Event Title]"),i=i.replace("{event_date}",k(l.value.completion_date)),i});function N(i){S.get(route("admin.certificates.create"),{event_id:i})}function D(){d.selectedEvent&&(l.value.participants=d.selectedEvent.participants.map(i=>i.id))}function V(){l.value.participants=[]}function A(){if(l.value.participants.length===0){alert("Please select at least one participant.");return}c.value=!0,S.post(route("admin.certificates.store"),{event_id:d.selectedEvent.id,completion_date:l.value.completion_date,certificate_title:l.value.certificate_title||null,certificate_template:l.value.certificate_template||null,participants:l.value.participants},{onFinish:()=>{c.value=!1}})}function k(i){return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function U(i){return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}return(i,t)=>(a(),z(L,{title:"Create Certificates"},{default:v(()=>[e("div",$,[e("div",O,[e("div",F,[e("div",q,[e("div",G,[t[6]||(t[6]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"Create & Assign Certificates"),e("p",{class:"text-gray-600"},"Generate certificates for event participants who have completed the event")],-1)),x(p(y),{href:i.route("admin.certificates.index"),class:"bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200"},{default:v(()=>[...t[5]||(t[5]=[b(" View All Certificates ",-1)])]),_:1},8,["href"])])])]),e("div",I,[e("div",J,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-gray-800 mb-4"},"Select Event",-1)),n.events.length===0?(a(),o("div",K,[t[8]||(t[8]=e("div",{class:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gray-100 mb-4"},[e("svg",{class:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t[9]||(t[9]=e("h4",{class:"text-lg font-semibold text-gray-800 mb-2"},"No Events Available",-1)),t[10]||(t[10]=e("p",{class:"text-gray-600 mb-6"},"There are no published events available for certificate generation.",-1)),x(p(y),{href:i.route("admin.events.create"),class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 transition-colors duration-200"},{default:v(()=>[...t[7]||(t[7]=[b(" Create New Event ",-1)])]),_:1},8,["href"])])):(a(),o("div",Q,[(a(!0),o(h,null,_(n.events,s=>(a(),o("div",{key:s.id,class:P(["border rounded-lg p-4 cursor-pointer transition-all duration-200",n.selectedEvent&&n.selectedEvent.id===s.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"]),onClick:m=>N(s.id)},[e("div",W,[e("h4",X,r(s.title),1),s.has_certificate?(a(),o("span",Y," Certificate Enabled ")):(a(),o("span",Z," No Certificate "))]),e("p",ee,r(k(s.event_date)),1),e("div",te,[e("span",se,r(s.checked_in_count)+" checked in",1),e("span",ie,r(s.certificates_generated_count)+" certificates",1)])],10,R))),128))]))])]),n.selectedEvent?(a(),o("div",le,[e("div",ae,[e("h3",ne,"Create Certificates for "+r(n.selectedEvent.title),1),e("form",{onSubmit:B(A,["prevent"])},[e("div",oe,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Completion Date",-1)),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.completion_date=s),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[w,l.value.completion_date]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Certificate Title (Optional)",-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.certificate_title=s),type:"text",placeholder:n.selectedEvent.title,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},null,8,re),[[w,l.value.certificate_title]])])]),e("div",de,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Certificate Template (Optional) "),e("span",{class:"text-gray-500 text-xs"},"Use {participant_name}, {event_title}, {event_date} as placeholders")],-1)),f(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.certificate_template=s),placeholder:n.selectedEvent.certificate_template||"This is to certify that {participant_name} has successfully completed {event_title} on {event_date}.",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",rows:"4"},null,8,ce),[[w,l.value.certificate_template]])]),e("div",ue,[e("div",me,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Certificate Preview",-1)),e("button",{type:"button",onClick:t[3]||(t[3]=s=>u.value=!u.value),class:"text-sm bg-blue-100 text-blue-700 hover:bg-blue-200 px-3 py-1 rounded"},r(u.value?"Hide Preview":"Show Preview"),1)]),u.value?(a(),o("div",ve,[e("div",be,[e("div",fe,[e("h1",ge,r(T.value),1),t[16]||(t[16]=e("div",{class:"w-20 h-1 bg-gradient-to-r from-yellow-400 to-yellow-600 mx-auto"},null,-1))]),e("div",xe,[t[17]||(t[17]=e("p",{class:"text-base text-gray-600"},"This is to certify that",-1)),t[18]||(t[18]=e("h2",{class:"text-xl font-bold text-gray-800 border-b-2 border-gray-300 pb-2 inline-block"}," [Participant Name] ",-1)),e("div",{class:"text-sm text-gray-700 leading-relaxed",innerHTML:M.value},null,8,pe)]),e("div",ye,[n.selectedEvent&&n.selectedEvent.certificate_signatories&&n.selectedEvent.certificate_signatories.length>0?(a(),o("div",{key:0,class:P(["flex items-end text-xs",n.selectedEvent.certificate_signatories.length===1?"justify-center":n.selectedEvent.certificate_signatories.length===2?"justify-between":"justify-around"])},[(a(!0),o(h,null,_(n.selectedEvent.certificate_signatories,(s,m)=>(a(),o("div",{key:m,class:"text-center"},[t[19]||(t[19]=e("div",{class:"w-24 border-b border-gray-400 mb-1"},null,-1)),e("p",he,r(s.name||"Signatory"),1),e("p",_e,r(s.title||"Position"),1)]))),128))],2)):(a(),o("div",we,[...t[20]||(t[20]=[e("div",{class:"text-center"},[e("div",{class:"w-24 border-b border-gray-400 mb-1"}),e("p",{class:"text-gray-800 font-semibold"},"Authorized Signatory"),e("p",{class:"text-gray-600 text-xs"},"Position")],-1)])]))])]),t[21]||(t[21]=e("div",{class:"text-center mt-4"},[e("p",{class:"text-xs text-gray-500"},"Preview - actual certificate styling may vary")],-1))])):j("",!0)]),e("div",ke,[e("div",Ce,[e("label",Ee," Select Participants ("+r(n.selectedEvent.participants.length)+" eligible) ",1),e("div",{class:"space-x-2"},[e("button",{type:"button",onClick:D,class:"text-sm bg-blue-100 text-blue-700 hover:bg-blue-200 px-3 py-1 rounded"}," Select All "),e("button",{type:"button",onClick:V,class:"text-sm bg-gray-100 text-gray-700 hover:bg-gray-200 px-3 py-1 rounded"}," Deselect All ")])]),n.selectedEvent.participants.length===0?(a(),o("div",je,[...t[22]||(t[22]=[e("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("p",{class:"text-lg font-semibold mb-2"},"No Eligible Participants",-1),e("p",null,"All checked-in participants already have certificates, or no participants have checked in yet.",-1)])])):(a(),o("div",Pe,[e("div",Se,[(a(!0),o(h,null,_(n.selectedEvent.participants,s=>(a(),o("div",{key:s.id,class:"flex items-center justify-between p-4 border-b last:border-b-0 hover:bg-gray-50"},[e("div",Te,[f(e("input",{id:`participant-${s.id}`,"onUpdate:modelValue":t[4]||(t[4]=m=>l.value.participants=m),value:s.id,type:"checkbox",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,8,Me),[[H,l.value.participants]]),e("label",{for:`participant-${s.id}`,class:"ml-3 cursor-pointer"},[e("div",De,r(s.user_name),1),e("div",Ve,r(s.user_email),1)],8,Ne)]),e("div",Ae,[t[23]||(t[23]=e("div",{class:"text-sm text-gray-600"},"Checked in:",-1)),e("div",Ue,r(U(s.checked_in_at)),1)])]))),128))])]))]),e("div",ze,[x(p(y),{href:i.route("admin.certificates.index"),class:"bg-gray-300 hover:bg-gray-400 text-gray-700 font-medium py-2 px-6 rounded-md transition-colors duration-200"},{default:v(()=>[...t[24]||(t[24]=[b(" Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:l.value.participants.length===0||c.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-2 px-6 rounded-md transition-colors duration-200"},[c.value?(a(),o("span",He,"Creating...")):(a(),o("span",Le,"Create "+r(l.value.participants.length)+" Certificate"+r(l.value.participants.length!==1?"s":""),1))],8,Be)])],32)])])):j("",!0)])])]),_:1}))}};export{Fe as default};
